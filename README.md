# ğŸ‘¨ğŸ»â€ğŸ’¼ í”„ë¡œì íŠ¸ ë§¤ë‹ˆì € ğŸ‘¨ğŸ»â€ğŸ’¼
- ì†Œê°œ: ì¹¸ë°˜ë³´ë“œ í˜•ì‹ì˜ í”„ë¡œì íŠ¸ë¥¼ ê´€ë¦¬í•´ì£¼ëŠ” ì•„ì´íŒ¨ë“œ ì „ìš© ì•±ì´ë‹¤.
- ê¸°ê°„: 2021. 03. 29 ~ 2021. 04. 18
- íŒ€ì›: [ê¼¬ë§](https://github.com/hakju), [ê¸€ë Œ](https://github.com/Journey36), [ì¤€ìŠ¤](https://github.com/elddy0948)

## íŒ€ í”„ë¡œì íŠ¸ ê·¸ë¼ìš´ë“œ ë£°
- íŒ€ì› : ê¸€ë Œ, ê¼¬ë§, ì¤€ìŠ¤
- ê¸°ê°„ : 2021. 03. 29 ~ 2021. 04. 18

- ìš°ë¦¬ íŒ€ë§Œì˜ ê·œì¹™
  - ë””ìŠ¤ì½”ë“œì— ìˆì„ ë•ŒëŠ” ì–¸ì œë“ ì§€ í¸í•˜ê²Œ ì—°ë½
  - githubì—ì„œ project, issue, milestone, dicussions ì ê·¹í™œìš©í•´ì„œ í”„ë¡œì íŠ¸ ì§„í–‰í•˜ê¸°

- ìŠ¤í¬ëŸ¼
  - ìŠ¤í¬ëŸ¼ ì‹œê°„ì€ ì˜¤ì „ 11ì‹œ (ì›”, í™”, ëª©, ê¸ˆ)
  - ë‚˜ëˆŒ ë‚´ìš©
  - ì»¨ë””ì…˜ ê³µìœ 
  - ì–´ì œ ê³µë¶€í•œ ë‚´ìš© ê³µìœ 
  - ì˜¤ëŠ˜ í•  ì¼ ê³µìœ 
  - í”„ë¡œì íŠ¸ ì§„í–‰ì‚¬í•­ ê³µìœ 

- í”„ë¡œì íŠ¸
  - Commit
  - ì»¤ë°‹ë‹¨ìœ„ : ë¹Œë“œë˜ëŠ” ìƒíƒœì—ì„œ, ê¸°ëŠ¥ë‹¨ìœ„ë¡œ ì»¤ë°‹í•˜ê¸°.
  - Type ê·œì¹™ (ì»¤ë°‹ ë©”ì„¸ì§€ì— ì´ìŠˆ ë²ˆí˜¸ë¥¼ ì¶”ê°€í•˜ë©´ í•´ë‹¹ ì´ìŠˆë¡œ commitì´ ë„˜ì–´ê°)
  - ì˜ˆì‹œ â†’ Typeì¢…ë¥˜ #ì´ìŠˆë²ˆí˜¸ - commit ë‚´ìš©
  - Feat: ê¸°ëŠ¥ êµ¬í˜„
  - Refactor: ê¸°ëŠ¥ ìˆ˜ì •
  - Fix: ë²„ê·¸ ìˆ˜ì •
  - Style: ë™ì‘ì— ì˜í–¥ì—†ëŠ” ì½”ë“œë³€ê²½, ì´ë¦„ë³€ê²½
  - Docs: ë¬¸ì„œìˆ˜ì •
  - Chore: ê¸°íƒ€

- ì½”ë”© ì»¨ë²¤ì…˜
  - Swift API ë””ìì¸ ê°€ì´ë“œë¼ì¸ì„ ì¤€ìˆ˜í•˜ê¸°
  - namingì— ì‹ ê²½ì“°ê¸°.
  - ì˜ë¯¸ì—†ëŠ” ë„ì–´ì“°ê¸° ì•ˆí•˜ë„ë¡ ì£¼ì˜í•˜ê¸°.
  - ê¸°ëŠ¥ ë¶„ë¦¬ ì˜ ë˜ë„ë¡ ì£¼ì˜í•˜ê¸°. (1 í•¨ìˆ˜ 1 ê¸°ëŠ¥ ì§€í–¥) 
---
 
## ğŸ“± ì•± ë™ì‘í™”ë©´ ğŸ“±
<img src = "https://user-images.githubusercontent.com/50835836/120988672-bedd8d80-c7b9-11eb-8480-900497ef0d5a.gif" alt = "InAppDrag" width = "600" height = "450">
<img src = "https://user-images.githubusercontent.com/50835836/120991929-0f0a1f00-c7bd-11eb-9375-6e7f44fcb2dc.gif" alt = "InAppEdit" width = "600" height = "450">
<img src = "https://user-images.githubusercontent.com/50835836/120988245-58f10600-c7b9-11eb-9f74-21c43a731cd7.gif" alt = "InAppDelete" width = "600" height = "450">
<img src = "https://user-images.githubusercontent.com/50835836/120988336-6efec680-c7b9-11eb-9c8f-92dd801b5946.gif" alt = "InAppCreate" width = "600" height = "450">

---

## ğŸ‘¨ğŸ»â€ğŸ’» êµ¬í˜„ ë‚´ìš© ğŸ‘¨ğŸ»â€ğŸ’»
- API ë¬¸ì„œë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•  ì¼ì— ëŒ€í•œ ëª¨ë¸ì„ ì •ì˜í•˜ì˜€ë‹¤.
- í•  ì¼ì„ ìŠ¤ì™€ì´í”„í•˜ì—¬ ì‚­ì œê°€ëŠ¥í•˜ê²Œ í•˜ì˜€ë‹¤.
- ê¸°í•œ ë‚ ì§œê°€ ê³¼ê±°ì˜ ë‚ ì§œë©´ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ í‘œì‹œí•˜ê²Œ í•˜ì˜€ë‹¤.
- í•  ì¼ì„ í„°ì¹˜í•˜ë©´ ìƒì„¸ë³´ê¸°ë¡œ ì „í™˜í•˜ê³  ìˆ˜ì •ë²„íŠ¼ì„ ëˆ„ë¥´ê¸° ì „ê¹Œì§€ ìˆ˜ì •ë˜ì§€ ì•ŠëŠ”ë‹¤.
- ìˆ˜ì • ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ í•  ì¼ì„ ìˆ˜ì •ê°€ëŠ¥í•˜ê²Œ í•˜ì˜€ë‹¤.
- í•  ì¼ì„ ë“œë˜ê·¸í•˜ì—¬ ë‹¤ë¥¸ ì˜ì—­ìœ¼ë¡œ ì´ë™ê°€ëŠ¥í•˜ê²Œ í•˜ì˜€ë‹¤.

---

## ğŸ’¡ ì–´ë–»ê²Œ êµ¬í˜„í• ê¹Œ? ğŸ’¡
### UI
- Project ManagerëŠ” ì¹¸ë°˜ë³´ë“œ í˜•ì‹ì´ë©° ì•„ì´íŒ¨ë“œ ì „ìš© ì•±ì´ë‹¤. ì²˜ìŒ UIë¥¼ êµ¬í˜„í•˜ê³ ì í• ë•Œ TableViewì™€ CollectionView ë‘˜ ì¤‘ ë¬´ì—‡ìœ¼ë¡œ êµ¬í˜„í•  ì§€, ê³ ë¯¼ì´ ì•ì„°ë‹¤.
  - #### TableView vs CollectionView
  |  | ì¥ì  | ë‹¨ì  |
  | :---- | ---- | ---- |
  | **TableView** | ìµìˆ™í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. | ìˆ˜í‰ ìŠ¤í¬ë¡¤ì´ ë¶ˆê°€í•˜ë‹¤. |
  | **CollectionView** | ìˆ˜ì§, ìˆ˜í‰ ìŠ¤í¬ë¡¤ì´ ê°€ëŠ¥í•˜ë‹¤. | ì‚¬ìš©í•œ ê²½í—˜ì´ ì—†ì–´ì„œ ë¯¸ìˆ™í•˜ë‹¤. | 
  - ìš°ë¦¬ëŠ” **ì‹ ê¸°ìˆ ì„ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê³  ì ìš©í•´ë³´ê³ ì** í•œë²ˆë„ ì‚¬ìš©í•´ë³´ì§€ ì•Šì€ CollectionViewë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ í•˜ì˜€ë‹¤.
  - (CollectionViewë¡œ TableViewì˜ ëª¨ë“  ë¶€ë¶„ì„ ìˆ˜ìš©í•  ìˆ˜ ìˆëŠ”ë° TableViewë¥¼ ì‚¬ìš©í•´ì•¼í•˜ëŠ” ì´ìœ ê°€ ë¬´ì—‡ì¼ê¹Œ?)
  - ì¶”ê°€ë¡œ ê²½í—˜í•´ë³´ì§€ ëª»í•œ **DiffableDataSourceë¥¼** ì‚¬ìš©í•´ë³´ê¸°ë¡œ í•˜ì˜€ë‹¤.

- Create ê¸°ëŠ¥
  - í•  ì¼ì„ ì¶”ê°€í•  ìˆ˜ ìˆê²Œ í•˜ì˜€ë‹¤.
  - modal ë°©ì‹ìœ¼ë¡œ viewë¥¼ ë³´ì—¬ì£¼ë©° í•  ì¼ì˜ ì œëª©, ê¸°í•œ, ìƒì„¸ ë‚´ìš©ì„ ì…ë ¥í•  ìˆ˜ ìˆë‹¤.
  - <img src = "https://user-images.githubusercontent.com/50835836/120988336-6efec680-c7b9-11eb-9c8f-92dd801b5946.gif" alt = "InAppCreate" width = "600" height = "450">
  ``` swift
  //PopOverViewController.swift
  @objc private func didTappedAddDoneButton() {
      let thing = Thing(id: UUID().uuidString, title: textField.text, description: textView.text, state: .todo, dueDate: datePicker.date.timeIntervalSince1970, updatedAt: "\(Date())")
      self.dismiss(animated: true) {
          self.delegate?.addThingToDataSource(self, thing: thing)
      }
  }
    
  @objc private func didTappedCancelButton() {
      self.dismiss(animated: true, completion: nil)
  }
  ```

- í•  ì¼ì˜ ê¸°í•œì´ ì§€ë‚˜ë©´ ê¸°í•œì˜ ê¸€ì ìƒ‰ìƒì„ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ë°”ê¿”ì£¼ê²Œ í•˜ì˜€ë‹¤.
  ``` swift
  //ListCollectionView.swift
  private func checkIsDatePassed(_ date: Double) -> Bool {
      let currentDate = Date().timeIntervalSince1970
      return date < currentDate
  }
  ```

- Drag & Drop ê¸°ëŠ¥
  - í•  ì¼ì„ ë“œë˜ê·¸í•˜ì—¬ í˜„ì¬ ìƒíƒœì— ë§ëŠ” ì˜ì—­ìœ¼ë¡œ ë“œë¡­í•  ìˆ˜ ìˆê²Œ í•˜ì˜€ë‹¤.
  - <img src = "https://user-images.githubusercontent.com/50835836/120988672-bedd8d80-c7b9-11eb-8480-900497ef0d5a.gif" alt = "InAppDrag" width = "600" height = "450">
  ``` swift 
  //MARK: - UICollectionViewDragDelegate -
  extension ViewController: UICollectionViewDragDelegate {
    func collectionView(_ collectionView: UICollectionView, itemsForBeginning session: UIDragSession, at indexPath: IndexPath) -> [UIDragItem] {
      guard let collectionView = collectionView as? ListCollectionView,
            let thing = collectionView.diffableDataSource.itemIdentifier(for: indexPath) else {
        return []
      }
        
      let itemProvider = NSItemProvider(object: thing)
      let dragItem = UIDragItem(itemProvider: itemProvider)
        
      return [dragItem]
    }
  }

  //MARK: - UICollectionViewDropDelegate -
  extension ViewController: UICollectionViewDropDelegate {
    func collectionView(_ collectionView: UICollectionView, dropSessionDidUpdate session: UIDropSession, withDestinationIndexPath destinationIndexPath: IndexPath?) -> UICollectionViewDropProposal {
    var dropProposal = UICollectionViewDropProposal(operation: .cancel)
    guard session.items.count == 1 else {
      return dropProposal
    }
    if collectionView.hasActiveDrag {
      dropProposal = UICollectionViewDropProposal(operation: .move, intent: .insertAtDestinationIndexPath)
    } else {
      dropProposal = UICollectionViewDropProposal(operation: .copy, intent: .insertAtDestinationIndexPath)
    }
    return dropProposal
  }
    
  func collectionView(_ collectionView: UICollectionView, performDropWith coordinator: UICollectionViewDropCoordinator) {
    guard let collectionView = collectionView as? ListCollectionView else {
      return
    }
        
    let destinationIndexPath: IndexPath
        
    if let indexPath = coordinator.destinationIndexPath {
      destinationIndexPath = indexPath
    } else {
      let section = collectionView.numberOfSections - 1
      let row = collectionView.numberOfItems(inSection: section)
      destinationIndexPath = IndexPath(row: row, section: section)
    }
        
    coordinator.session.loadObjects(ofClass: Thing.self) { [weak self] (items) in
      guard let self = self else { return }
      guard let thingItem = items as? [Thing],
            let thing = thingItem.first else { return }
      let state = collectionView.collectionType
            
      self.deleteFromBefore(thing: thing)
      thing.state = state
      collectionView.reorderDataSource(destinationIndexPath: destinationIndexPath, thing: thing)
      }
    }
  }
  ```
  
- Edit ê¸°ëŠ¥
  - í•  ì¼ì„ ì„ íƒí•˜ë©´ ì œëª©, ê¸°í•œ, ìƒì„¸ ë‚´ìš©ì„ ë³´ì—¬ì£¼ëŠ” viewë¥¼ modal ë°©ì‹ìœ¼ë¡œ ë³´ì—¬ì¤€ë‹¤.
  - edit ë²„íŠ¼ì„ í´ë¦­ ì‹œ ì œëª©, ê¸°í•œ, ìƒì„¸ ë‚´ìš©ì„ ìˆ˜ì •í•  ìˆ˜ ìˆê²Œ í•˜ì˜€ë‹¤.
  - <img src = "https://user-images.githubusercontent.com/50835836/120991929-0f0a1f00-c7bd-11eb-9375-6e7f44fcb2dc.gif" alt = "InAppEdit" width = "600" height = "450">
  ``` swift
  //PopOverViewController.swift
  @objc private func didTappedEditButton() {
      guard let contentView = self.navigationController?.viewControllers.last as? PopOverViewController else { return }
      contentView.textField.isUserInteractionEnabled = true
      contentView.datePicker.isUserInteractionEnabled = true
      contentView.textView.isUserInteractionEnabled = true
        
      contentView.textField.becomeFirstResponder()
  }
  
  @objc private func didTappedEditDoneButton() {
      guard let contentView = self.navigationController?.viewControllers.last as? PopOverViewController else { return }
      guard let thing = self.thing else {
          return
      }
      self.dismiss(animated: true) {
          thing.title = contentView.textField.text
          thing.detail = contentView.textView.text
          thing.dueDate = contentView.datePicker.date.timeIntervalSince1970
          self.delegate?.editThingToDataSource(self, thing: thing)
      }
  }
  
  //ViewController.swift
  func editThingToDataSource(_ popOverViewController: PopOverViewController, thing: Thing) {
      guard let state = thing.state else { return }
      switch state {
      case .todo:
          todoCollectionView.updateThing(thing: thing)
      case .doing:
          doingCollectionView.updateThing(thing: thing)
      case .done:
          doneCollectionView.updateThing(thing: thing)
      }
  }
  ```

- PopOverViewControllerê°€ í™”ë©´ì— ë³´ì—¬ì§€ì§€ ì•Šì„ CollectionViewë¥¼ ë“¤ê³  ë‹¤ë…€ì„œ ë°œìƒí•˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆê³  PopOverViewControllerì˜ viewë“¤ì„ privateìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ì—†ì—ˆë‹¤.
  - ê¸°ì¡´ì— PopOverViewControllerì˜ viewë“¤ì€ ViewControllerì—ì„œ ì ‘ê·¼í•˜ê³  ìˆì—ˆê¸° ë•Œë¬¸ì— privateìœ¼ë¡œ ì„¤ì •í•´ì¤„ ìˆ˜ ì—†ì—ˆë‹¤. ê·¸ë˜ì„œ ViewControllerì—ì„œëŠ” PopOverViewControllerì— ì‚¬ìš©í•  Thingë§Œ ë„˜ê²¨ì£¼ê³ , ê·¸ Thingì˜ ìœ ë¬´ì— ë”°ë¼ Addë¥¼ ìœ„í•œ PopOverViewControllerì¸ì§€ Editë¥¼ ìœ„í•œ PopOverViewControllerì¸ì§€ ê²°ì •í•˜ê²Œ í•˜ì˜€ë‹¤. ê·¸ë˜ì„œ ê¸°ì¡´ì— ViewControllerì—ì„œ ì ‘ê·¼í•˜ì—¬ ì„¤ì •í–ˆë˜ ê°’ë“¤ì„ PopOverViewControllerì—ì„œ ì„¤ì •í•˜ì—¬ Viewë“¤ì—ê²Œ ì ‘ê·¼ì œí•œìë¥¼ ì„¤ì •í•´ì¤„ ìˆ˜ ìˆê²Œ í•˜ì˜€ë‹¤.
  - ê¸°ì¡´ì— PopOverViewControllerê°€ í™”ë©´ì— ë³´ì—¬ì§€ì§€ ì•Šì„ CollectionViewë¥¼ ì†Œìœ í•˜ê³  ìˆì—ˆëŠ”ë° ì´ë¥¼ PopOverViewControllerì— Protocolì„ ìƒì„±í•´ì£¼ë©´ì„œ Delegate íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ í•´ê²°í–ˆë‹¤.
  ``` swift
  // ë³€ê²½ ì „
  func didTapAddButton(with collectionView: ListCollectionView) {
      let addTodoViewController = AddTodoViewController(collectionView: collectionView)
      addTodoViewController.modalPresentationStyle = .formSheet
      self.present(UINavigationController(rootViewController: addTodoViewController), animated: true, completion: nil)
  }

  // ë³€ê²½ í›„
  private func didTapAddButton(with collectionView: ListCollectionView) {
      let popOverViewController = PopOverViewController(thing: nil)
      popOverViewController.modalPresentationStyle = .formSheet
      popOverViewController.delegate = self
      self.present(UINavigationController(rootViewController: popOverViewController), animated: true, completion: nil)
  }
  
  protocol PopOverViewDelegate: AnyObject {
    func addThingToDataSource(_ popOverViewController: PopOverViewController, thing: Thing)
    func editThingToDataSource(_ popOverViewController: PopOverViewController, thing: Thing)
  }
  
  @objc private func didTappedAddDoneButton() {
      let thing = Thing(id: UUID().uuidString, title: textField.text, description: textView.text, state: .todo, dueDate: datePicker.date.timeIntervalSince1970, updatedAt: "\(Date())")
      self.dismiss(animated: true) {
          self.delegate?.addThingToDataSource(self, thing: thing)
      }
  }
  ```
  
- Delete ê¸°ëŠ¥
  - í•  ì¼ì„ ìŠ¤ì™€ì´í”„í•˜ë©´ ì‚­ì œí•  ìˆ˜ ìˆê²Œ í•˜ì˜€ë‹¤.
  - 1ë²ˆ ìŠ¤ì™€ì´í”„ì‹œ, ì‚­ì œ ë²„íŠ¼ì´ ìƒê¸°ê³  ë²„íŠ¼ì„ í´ë¦­í•˜ê±°ë‚˜ 1ë²ˆ ë” ìŠ¤ì™€ì´í”„í•˜ê²Œë˜ë©´ ì‚­ì œê°€ ëœë‹¤.
  - <img src = "https://user-images.githubusercontent.com/50835836/120988245-58f10600-c7b9-11eb-9f74-21c43a731cd7.gif" alt = "InAppDelete" width = "600" height = "450">
  ``` swift
  // ListCollectionView.swift
  func deleteDataSource(thing: Thing) {
    var snapshot = diffableDataSource.snapshot()
    snapshot.deleteItems([thing])
    diffableDataSource.apply(snapshot, animatingDifferences: true)
  }
  
  // UIHelper.swift
  var listConfigration = UICollectionLayoutListConfiguration(appearance: .plain)
  listConfigration.trailingSwipeActionsConfigurationProvider = { indexPath in
    guard let thing = collectionView.diffableDataSource.itemIdentifier(for: indexPath) else {
      return nil
    }
    let actionHandler: UIContextualAction.Handler = { action, view, completion in
      collectionView.deleteDataSource(thing: thing)
    }
    let action = UIContextualAction(style: .destructive, title: "Delete", handler: actionHandler)
    return UISwipeActionsConfiguration(actions: [action])
  }
  let layout = UICollectionViewCompositionalLayout.list(using: listConfigration)
  ```
  
